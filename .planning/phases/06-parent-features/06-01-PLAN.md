---
phase: 06-parent-features
plan: 01
type: execute
---

<objective>
Implement parent gate with math question challenge and parent dashboard showing per-player statistics.

Purpose: Allow parents to access settings area while keeping children out; provide visibility into player progress.
Output: Working math gate (5-15 range) and dashboard with player stats and reset controls.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-phase.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md

**Prior work:**
@.planning/phases/04-reward-system/04-03-SUMMARY.md

**Key files:**
@BennieGame/BennieGame/Features/Parent/ParentGateView.swift
@BennieGame/BennieGame/Core/State/PlayerStore.swift
@BennieGame/BennieGame/Core/State/PlayerData.swift
@BennieGame/BennieGame/App/AppCoordinator.swift
@BennieGame/BennieGame/App/ContentView.swift

**Design constraints (from PLAYBOOK):**
- Math gate range: 5-15 (sum of two single-digit numbers)
- Touch targets: ≥96pt minimum
- German-only UI
- Positive feedback only
- No red/neon colors
</context>

<tasks>

<task type="auto">
  <name>Task 1: Implement math gate with random arithmetic challenge</name>
  <files>BennieGame/BennieGame/Features/Parent/ParentGateView.swift</files>
  <action>
Replace the placeholder ParentGateView with full implementation:

1. Generate random math question on appear:
   - Two single-digit numbers (1-9)
   - Addition only (result range 5-15 as per playbook)
   - Format: "X + Y = ?"

2. Input system:
   - Row of number buttons 0-9 (use NumberPadView component)
   - Display area showing entered digits
   - Clear button to reset input
   - Submit button to check answer
   - All buttons ≥96pt touch targets

3. State management:
   - @State for num1, num2, userInput
   - Track attempts (max 3 before regenerating question)
   - Success transitions to parentDashboard via coordinator

4. Feedback:
   - Correct: Brief green checkmark animation, then navigate
   - Wrong: Gentle shake of answer area (no negative words), try again
   - After 3 wrong attempts: Generate new question

5. Visual design:
   - Lock icon at top
   - "Elternbereich" title
   - Math question in large font
   - Number pad below
   - Back button to return home

Example structure:
```swift
@State private var num1 = Int.random(in: 1...9)
@State private var num2 = Int.random(in: 1...9)
@State private var userInput = ""
@State private var attempts = 0
@State private var showSuccess = false
@State private var showWrongAnswer = false

private var correctAnswer: Int { num1 + num2 }

private func checkAnswer() {
    if Int(userInput) == correctAnswer {
        showSuccess = true
        // Navigate after brief delay
    } else {
        attempts += 1
        showWrongAnswer = true
        if attempts >= 3 { regenerateQuestion() }
    }
}
```
  </action>
  <verify>xcodebuild build succeeds, math gate shows question, correct answer navigates to dashboard</verify>
  <done>Math gate validates answers, shows feedback, navigates on success</done>
</task>

<task type="auto">
  <name>Task 2: Create ParentDashboardView with player statistics and controls</name>
  <files>BennieGame/BennieGame/Features/Parent/ParentDashboardView.swift, BennieGame/BennieGame/App/ContentView.swift, BennieGame.xcodeproj/project.pbxproj</files>
  <action>
Create ParentDashboardView.swift with:

1. Header:
   - Title: "Elternbereich"
   - Back button to home (not through gate)

2. Player cards (for Alexander and Oliver):
   - Player name and avatar/icon
   - Current coins
   - Total coins earned
   - Last played date (formatted in German)
   - Reset button per player

3. Reset functionality:
   - Use existing playerStore.resetProgress(for:) method
   - Confirmation dialog before reset
   - German text: "Fortschritt zurücksetzen?"

4. Quick actions section:
   - "Alle zurücksetzen" button (uses resetAllProgress)
   - Navigation to video management (placeholder for 06-02)
   - Navigation to time settings (placeholder for 06-02)

5. Visual design:
   - BennieColors.cream background
   - Card-based layout for each player
   - WoodButton style for actions
   - Stats displayed with icons

Wire into ContentView:
- Add case for .parentDashboard in switch statement
- Import and display ParentDashboardView

Add to Xcode project.pbxproj.
  </action>
  <verify>xcodebuild build succeeds, dashboard shows both players' stats, reset buttons work</verify>
  <done>Parent dashboard displays stats for both players with working reset functionality</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] xcodebuild build succeeds without errors
- [ ] Math gate generates questions in 5-15 range
- [ ] Correct answer navigates to dashboard
- [ ] Wrong answer shows feedback (no negative words)
- [ ] Dashboard shows both players' statistics
- [ ] Reset buttons work with confirmation dialog
- [ ] All touch targets ≥96pt
- [ ] German-only UI throughout
</verification>

<success_criteria>

- All tasks completed
- All verification checks pass
- Math gate properly validates parent access
- Dashboard provides visibility into player progress
- Reset functionality works correctly
</success_criteria>

<output>
After completion, create `.planning/phases/06-parent-features/06-01-SUMMARY.md` with:
- Math gate implementation details
- Dashboard layout and features
- Files created/modified
- Any design decisions made
</output>
