---
phase: 08-asset-production
plan: 02
type: execute
---

<objective>
Generate 4-layer parallax forest background images using Gemini Imagen 4.0 API per playbook specifications.

Purpose: Replace solid color backgrounds with immersive forest scenery that creates the "magical, safe, warm forest world" aesthetic.
Output: 8 background layer images at @2x/@3x scales, imported to Xcode Assets.xcassets.
</objective>

<execution_context>
~/.claude/get-shit-done/workflows/execute-phase.md
./08-02-SUMMARY.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@PLAYBOOK_CONDENSED.md
@scripts/generate_ui_components.py (reference for Gemini API usage)
@scripts/import_ui_to_xcode.py (reference for asset import)

**From playbook - Forest Background Layers:**
| Layer | Color | Purpose |
|-------|-------|---------|
| Far trees (misty) | #4A6B5C | Depth, atmosphere |
| Mid trees (sage) | #738F66 | Forest body |
| Near foliage | #7A9973 | Foreground framing |
| Light rays | #F5E6C8 @ 30% | Golden hour glow |

**Visual Style:**
- Warm golden light from upper-left (perpetual golden hour)
- Magical, safe, warm forest world
- Cel-shaded/vector style consistent with UI components

**Background Variants:**
1. forest_layer_far - Misty distant trees
2. forest_layer_mid - Main forest body
3. forest_layer_near - Close foreground foliage
4. forest_layer_glow - Light rays overlay

**From 08-01:** Gemini model is `imagen-4.0-generate-001` (not 3.0)
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create background generation script</name>
  <files>scripts/generate_backgrounds.py</files>
  <action>Create Python script using Gemini Imagen 4.0 API (same pattern as generate_ui_components.py).

Generate 4 forest layers:
1. `forest_layer_far` - Misty distant trees, color #4A6B5C, soft edges, atmospheric perspective
2. `forest_layer_mid` - Main forest trees, color #738F66, more detail, sage green tones
3. `forest_layer_near` - Close foliage/grass, color #7A9973, detailed leaves/grass edges
4. `forest_layer_glow` - Light rays overlay, color #F5E6C8 at 30% opacity, coming from upper-left

Each layer at iPad landscape resolution (1194x834 @1x → 2388x1668 @2x, 3582x2502 @3x).

Use prompts that specify:
- Cel-shaded/vector style
- Children's game aesthetic
- Seamless horizontal edges for parallax
- Transparent PNG where appropriate (glow layer)
- Color palette compliance</action>
  <verify>python scripts/generate_backgrounds.py runs without error, outputs to design/generated/Backgrounds/</verify>
  <done>4 forest layers generated at @2x and @3x scales (8 images total)</done>
</task>

<task type="auto">
  <name>Task 2: Import backgrounds to Xcode</name>
  <files>scripts/import_backgrounds_to_xcode.py</files>
  <action>Create import script (pattern from import_ui_to_xcode.py).

Import to Assets.xcassets/Backgrounds/:
- forest_layer_far.imageset
- forest_layer_mid.imageset
- forest_layer_near.imageset
- forest_layer_glow.imageset

Create proper Contents.json for each imageset.</action>
  <verify>ls BennieGame/BennieGame/Resources/Assets.xcassets/Backgrounds/ shows 4 imagesets</verify>
  <done>All 4 background imagesets present in Xcode project</done>
</task>

<task type="auto">
  <name>Task 3: Verify build and update GSD files</name>
  <files>.planning/ROADMAP.md, .planning/STATE.md</files>
  <action>Build Xcode project to verify assets compile correctly.

Update ROADMAP.md:
- Mark 08-02 as complete
- Update progress count

Update STATE.md:
- Update current position to 08-03</action>
  <verify>xcodebuild -scheme BennieGame build succeeds</verify>
  <done>Build succeeds, GSD files updated, plan 08-02 marked complete</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] 4 forest layer images exist in design/generated/Backgrounds/
- [ ] Each layer has @2x and @3x variants (8 files total)
- [ ] All 4 imagesets imported to Assets.xcassets/Backgrounds/
- [ ] Xcode build succeeds
- [ ] ROADMAP.md shows 08-02 complete
</verification>

<success_criteria>

- All tasks completed
- All verification checks pass
- 8 background images generated (4 layers × 2 scales)
- Assets compiled into app bundle
- Ready for 08-03 (Lottie Animations)
  </success_criteria>

<output>
After completion, create `.planning/phases/08-asset-production/08-02-SUMMARY.md`:

# Phase 8 Plan 02: Background Images Summary

**[One-liner summary of what was accomplished]**

## Accomplishments

- Generated 4 forest parallax layers via Gemini Imagen 4.0
- Imported to Xcode Assets.xcassets

## Files Created/Modified

- `scripts/generate_backgrounds.py` - Background generation script
- `scripts/import_backgrounds_to_xcode.py` - Asset import script
- `Assets.xcassets/Backgrounds/` - 4 imagesets

## Decisions Made

[Any decisions about layer composition, prompts, etc.]

## Issues Encountered

[Any API issues, generation quality issues, etc.]

## Next Step

Ready for 08-03-PLAN.md (Lottie Animations)
</output>
