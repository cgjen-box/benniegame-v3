---
phase: 08-asset-production
plan: 03
type: execute
---

<objective>
Generate Lottie character animations using the Gemini → Ludo.ai → Lottie pipeline.

Purpose: Create smooth, autism-friendly character animations for Bennie and Lemminge.
Output: 13 Lottie JSON files imported to Xcode project.
</objective>

<execution_context>
~/.claude/get-shit-done/workflows/execute-phase.md
./08-03-SUMMARY.md
~/.claude/get-shit-done/references/checkpoints.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@PLAYBOOK_CONDENSED.md
@starter-kits/ludo-animation-pipeline/SKILL.md
@starter-kits/ludo-animation-pipeline/config/animation_specs.json

**From playbook - Character Animations:**
| Character | Emotions |
|-----------|----------|
| Bennie (7) | idle, happy, thinking, encouraging, celebrating, waving, pointing |
| Lemminge (6) | idle, curious, excited, celebrating, hiding, mischievous |

**Animation Requirements:**
- Gentle motion only (autism-friendly)
- No flashing or jarring movements
- 0.6s - 2.0s loop duration
- Seamless looping
- Transparent background
- Character colors must match: Bennie #8C7259, Lemminge #6FA8DC

**From 08-01/08-02:** Gemini API works via `google-genai` package, scripts in `scripts/` directory.

**Ludo.ai Pipeline:**
1. Gemini generates START + END keyframes
2. Ludo.ai interpolates to ~42 frames (5 credits each)
3. Process ZIP to Lottie JSON

**Credits needed:** ~65-100 credits (Starter plan $15/month = 250 credits)
</context>

<tasks>

<task type="auto">
  <name>Task 1: Generate all keyframes via Gemini</name>
  <files>scripts/generate_all_keyframes.py</files>
  <action>Create a script that uses the ludo-animation-pipeline to generate START/END keyframes for all 13 animations.

Use the existing `starter-kits/ludo-animation-pipeline/generate_keyframes.py` as reference.

Characters and emotions to generate:
**Bennie (7):** idle, happy, thinking, encouraging, celebrating, waving, pointing
**Lemminge (6):** idle, curious, excited, celebrating, hiding, mischievous

For each emotion, generate:
- START frame (resting/neutral position)
- END frame (peak of the emotion)

Output structure:
```
design/generated/Animations/keyframes/
├── bennie_idle/
│   ├── start.png
│   └── end.png
├── bennie_happy/
│   ├── start.png
│   └── end.png
... (13 total)
```

Character reference images must be loaded from:
- `design/references/character/bennie/reference/bennie-reference.png`
- `design/references/character/lemminge/reference/lemminge-reference.png`

Ensure prompts specify:
- Exact colors (Bennie #8C7259, Lemminge #6FA8DC)
- NO clothing on Bennie
- Transparent PNG background
- Cel-shaded/vector style matching UI components</action>
  <verify>ls design/generated/Animations/keyframes/ shows 13 directories with start.png and end.png each (26 files total)</verify>
  <done>All 13 animation keyframe pairs generated</done>
</task>

<task type="checkpoint:human-action" gate="blocking">
  <action>Process keyframes through Ludo.ai to generate interpolated animations</action>
  <instructions>
I've generated 26 keyframe images (START + END for each of 13 animations).

**Now you need to use Ludo.ai to interpolate these into full animations.**

For EACH animation:
1. Go to https://ludo.ai/sprite-generator
2. Switch to the "Animate" tab
3. Upload the START keyframe as first image
4. Upload the END keyframe as second image
5. Enter motion description (e.g., "gentle breathing cycle", "friendly wave")
6. Click "Animate" (costs 5 credits)
7. Wait for generation (~1-2 minutes)
8. Download the ZIP file
9. Save to: `starter-kits/ludo-animation-pipeline/downloads/` with naming: `{character}_{emotion}.zip`

**Motion hints from config:**
| Animation | Motion Description |
|-----------|-------------------|
| bennie_idle | slow breathing cycle |
| bennie_happy | gentle bounce |
| bennie_thinking | slow pondering |
| bennie_encouraging | supportive nod |
| bennie_celebrating | controlled jump |
| bennie_waving | friendly wave |
| bennie_pointing | quick point |
| lemminge_idle | quick breathing |
| lemminge_curious | head tilt |
| lemminge_excited | rapid bounce |
| lemminge_celebrating | quick jump |
| lemminge_hiding | shrink motion |
| lemminge_mischievous | sneaky sway |

**Credits required:** ~65 credits (13 animations × 5 credits)

**Note:** This is a manual step because Ludo.ai has no public API. The MCP Chrome DevTools automation is complex and may require troubleshooting.
  </instructions>
  <verification>ls starter-kits/ludo-animation-pipeline/downloads/*.zip shows 13 ZIP files</verification>
  <resume-signal>Type "done" when all 13 ZIPs are downloaded</resume-signal>
</task>

<task type="auto">
  <name>Task 2: Process ZIPs to Lottie JSON</name>
  <files>scripts/process_animations.py</files>
  <action>Create a script that processes all downloaded Ludo.ai ZIPs into Lottie JSON files.

Use the existing `starter-kits/ludo-animation-pipeline/process.py` and `spritesheet_processor.py` as reference.

The script should:
1. Find all ZIPs in `starter-kits/ludo-animation-pipeline/downloads/`
2. For each ZIP:
   - Extract spritesheet PNG
   - Detect grid dimensions
   - Extract individual frames
   - Apply per-animation timing from `config/animation_specs.json`
   - Generate Lottie JSON with embedded PNG frames
3. Output to: `design/generated/Animations/lottie/`

QA checks to run:
- Lottie structure validation
- Duration within 0.5s - 3.0s
- Seamless loop (first/last frame similar)
- Generate frame strip for visual inspection

Output structure:
```
design/generated/Animations/
├── lottie/
│   ├── bennie_idle.json
│   ├── bennie_happy.json
│   ... (13 files)
└── qa/
    ├── bennie_idle.strip.png
    ├── bennie_happy.strip.png
    ... (13 frame strips)
```</action>
  <verify>ls design/generated/Animations/lottie/*.json | wc -l returns 13</verify>
  <done>All 13 Lottie JSON files generated with QA passed</done>
</task>

<task type="auto">
  <name>Task 3: Import animations to Xcode and update GSD files</name>
  <files>scripts/import_animations_to_xcode.py</files>
  <action>Create a script to import Lottie JSON files to Xcode project.

Import location: `BennieGame/BennieGame/Resources/Animations/`

Structure:
```
Resources/Animations/
├── Bennie/
│   ├── bennie_idle.json
│   ├── bennie_happy.json
│   ... (7 files)
└── Lemminge/
    ├── lemminge_idle.json
    ├── lemminge_curious.json
    ... (6 files)
```

After import:
1. Verify Xcode build succeeds
2. Update ROADMAP.md: mark 08-03 complete, Phase 8 complete
3. Update STATE.md: milestone complete status</action>
  <verify>xcodebuild -scheme BennieGame build succeeds; ls BennieGame/BennieGame/Resources/Animations/**/*.json shows 13 files</verify>
  <done>All animations imported, build succeeds, Phase 8 marked complete</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] 13 Lottie JSON files exist in design/generated/Animations/lottie/
- [ ] 13 QA frame strips exist for visual inspection
- [ ] All animations imported to Xcode Resources/Animations/
- [ ] Xcode build succeeds
- [ ] ROADMAP.md shows Phase 8 complete
</verification>

<success_criteria>

- All tasks completed
- All verification checks pass
- 13 character animations (7 Bennie + 6 Lemminge)
- Each animation:
  - Smooth looping
  - Correct duration (0.6s - 2.0s)
  - Autism-friendly motion
- Phase 8: Asset Production marked complete
- Milestone 100% complete (23/23 plans)
</success_criteria>

<output>
After completion, create `.planning/phases/08-asset-production/08-03-SUMMARY.md`:

# Phase 8 Plan 03: Lottie Animations Summary

**[One-liner summary of animations generated]**

## Accomplishments

- Generated keyframes via Gemini for 13 animations
- Processed Ludo.ai spritesheets to Lottie JSON
- Imported all animations to Xcode project

## Files Created/Modified

- `scripts/generate_all_keyframes.py` - Keyframe generation
- `scripts/process_animations.py` - Lottie processor
- `scripts/import_animations_to_xcode.py` - Xcode import
- `Resources/Animations/` - 13 Lottie JSON files

## Decisions Made

[Any decisions about animation timing, quality adjustments, etc.]

## Issues Encountered

[Any Ludo.ai issues, generation quality problems, etc.]

## Next Step

Phase 8 complete. Milestone 100% done.
Ready for `/gsd:complete-milestone`
</output>
