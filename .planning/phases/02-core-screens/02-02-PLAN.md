---
phase: 02-core-screens
plan: 02
type: execute
---

<objective>
Create Loading screen and Player Selection screen with full visual design and navigation.

Purpose: Implement the first two user-facing screens in the game flow.
Output: Working loading â†’ player selection â†’ home navigation with proper visuals.
</objective>

<execution_context>
~/.claude/get-shit-done/workflows/execute-phase.md
~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@PLAYBOOK_CONDENSED.md

**Prior plans:**
- 02-01: GameState, PlayerData, PlayerStore, AppCoordinator wired up

**Components available:**
@BennieGame/Design/Components/WoodButton.swift
@BennieGame/Design/Components/WoodSign.swift
@BennieGame/Design/Components/ProgressBar.swift
@BennieGame/Design/Theme/BennieColors.swift
@BennieGame/Design/Theme/BennieTypography.swift

**Critical design rules:**
- Touch targets â‰¥ 96pt (use ChildFriendlyButton/WoodButton)
- Bennie: Brown #8C7259, NO clothing
- German text only
- Screen coordinates from playbook (iPad 1194Ã—834)
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create LoadingView</name>
  <files>BennieGame/Features/Loading/LoadingView.swift</files>
  <action>
Create LoadingView matching playbook specifications:

**Layout:**
- Title sign: "Waldabenteuer lÃ¤dt" (centered top, use WoodSign)
- Bennie placeholder: Left of center, show SF Symbol "bear.fill" colored #8C7259 (actual Bennie asset later)
- Progress bar: Bottom center, use ProgressBar component showing loading progress (not coins)
- Loading text: "Lade Spielewelt..." below progress bar, BennieFont.body

**Behavior:**
- On appear: Start 2-second timer simulating load
- Animate progress from 0% to 100%
- At 100%: Wait 0.5s then transition to .playerSelection via coordinator

**Implementation notes:**
- Use @Environment to access AppCoordinator
- Use @State for progress (0.0 to 1.0)
- Use ProgressBar with custom binding (not coin-based)
- Background: BennieColors.cream or forestBackground if available

Do NOT add Lottie animations yet - use static placeholder for Bennie.
  </action>
  <verify>LoadingView renders; progress animates; auto-transitions to playerSelection after ~2.5s</verify>
  <done>LoadingView shows title, Bennie placeholder, animated progress, and transitions correctly</done>
</task>

<task type="auto">
  <name>Task 2: Create PlayerSelectionView</name>
  <files>BennieGame/Features/PlayerSelection/PlayerSelectionView.swift</files>
  <action>
Create PlayerSelectionView matching playbook:

**Layout:**
- Title: "Wer spielt heute?" (WoodSign, centered top, hanging)
- Alexander button: Position (400, 350), WoodButton with icon + name + coin count
- Oliver button: Position (800, 350), WoodButton with icon + name + coin count
- Bennie placeholder: Bottom center, waving pose indicator
- Background: BennieColors.cream

**Button contents:**
- SF Symbol "person.fill" as avatar placeholder
- Player name in BennieFont.button
- "ðŸª™ [X] MÃ¼nzen" showing current coins from PlayerStore

**Behavior:**
- On tap Alexander: playerStore.selectPlayer(id: "alexander"), then coordinator â†’ .home
- On tap Oliver: playerStore.selectPlayer(id: "oliver"), then coordinator â†’ .home
- Add 0.3s delay before transition for visual feedback

**Implementation notes:**
- Use @Environment for coordinator and playerStore
- Touch targets enforced via WoodButton (â‰¥96pt)
- German text only
  </action>
  <verify>Both player buttons visible; tapping selects player and navigates to home; coin counts display</verify>
  <done>PlayerSelectionView shows both players with coins; selection works; navigates to home</done>
</task>

<task type="auto">
  <name>Task 3: Wire up navigation and update ContentView</name>
  <files>BennieGame/App/ContentView.swift, BennieGame/App/BennieGameApp.swift</files>
  <action>
Update ContentView to properly route views:

```swift
struct ContentView: View {
    @Environment(AppCoordinator.self) var coordinator
    @Environment(PlayerStore.self) var playerStore

    var body: some View {
        Group {
            switch coordinator.currentState {
            case .loading:
                LoadingView()
            case .playerSelection:
                PlayerSelectionView()
            case .home:
                HomeView() // Placeholder for now
            default:
                Text("State: \(String(describing: coordinator.currentState))")
            }
        }
        .animation(.easeInOut(duration: 0.3), value: coordinator.currentState)
    }
}
```

Update BennieGameApp to properly inject environment:
- Create coordinator and playerStore as @State
- Use .environment() modifier to inject both
- Ensure landscape orientation (already configured in Info.plist)

Create minimal HomeView placeholder that shows:
- "Waldabenteuer" title
- Active player name from playerStore
- "Home screen coming in 02-03"
  </action>
  <verify>Full flow works: loading (2s) â†’ player selection â†’ tap player â†’ home placeholder</verify>
  <done>Navigation flow complete from loading through player selection to home</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] Project builds without errors
- [ ] LoadingView shows title, progress, and auto-transitions
- [ ] PlayerSelectionView shows both players with coin counts
- [ ] Selecting player navigates to home
- [ ] Player selection persists (stored in PlayerStore)
- [ ] Touch targets â‰¥ 96pt on all buttons
- [ ] All text is German
- [ ] Colors match BennieColors palette
</verification>

<success_criteria>
- All tasks completed
- Loading â†’ Player Selection â†’ Home flow works
- Visual design matches playbook (within placeholder constraints)
- Touch targets enforced
- German text only
- Project compiles successfully
</success_criteria>

<output>
After completion, create `.planning/phases/02-core-screens/02-02-SUMMARY.md`

The summary should note: "Loading and PlayerSelection screens complete, navigation flow working"
</output>
