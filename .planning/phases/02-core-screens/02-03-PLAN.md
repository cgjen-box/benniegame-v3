---
phase: 02-core-screens
plan: 03
type: execute
---

<objective>
Create Home screen with activity signs, treasure chest, and navigation elements.

Purpose: Complete the core navigation flow with the main hub screen.
Output: Working home screen with 4 activity signs, treasure chest access, and settings entry point.
</objective>

<execution_context>
~/.claude/get-shit-done/workflows/execute-phase.md
~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@PLAYBOOK_CONDENSED.md

**Prior plans:**
- 02-01: GameState, PlayerData, PlayerStore, AppCoordinator wired up
- 02-02: LoadingView, PlayerSelectionView, ContentView navigation

**Components available:**
@BennieGame/Design/Components/WoodButton.swift
@BennieGame/Design/Components/WoodSign.swift
@BennieGame/Design/Components/ProgressBar.swift
@BennieGame/Design/Theme/BennieColors.swift
@BennieGame/Design/Theme/BennieTypography.swift

**Critical design rules:**
- Touch targets â‰¥ 96pt (use WoodSign for activity signs)
- Bennie: Brown #8C7259, NO clothing
- German text only
- Screen coordinates from playbook (iPad 1194Ã—834)
- RÃ¤tsel & Zahlen unlocked, Zeichnen & Logik locked
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create HomeView layout</name>
  <files>BennieGame/Features/Home/HomeView.swift</files>
  <action>
Create HomeView matching playbook specifications:

**Layout:**
- Title sign: "Waldabenteuer" (WoodSign, centered top, hanging style)
- Activity signs arranged horizontally:
  - RÃ¤tsel: Position ~(250, 380), unlocked, glowing
  - Zahlen 1,2,3: Position ~(450, 380), unlocked, glowing
  - Zeichnen: Position ~(650, 380), LOCKED (chains + padlock)
  - Logik: Position ~(850, 380), LOCKED (chains + padlock)
- Treasure chest: Bottom right (~1050, 680), tappable
- Settings gear: Bottom left (~60, 700), small icon button
- Bennie placeholder: Right side, pointing pose (SF Symbol "bear.fill")
- Background: BennieColors.cream

**Activity Sign Content:**
Each WoodSign should show:
- Activity name in BennieFont.button
- Small icon representing activity type (SF Symbols as placeholders)
- Use WoodSign's locked state for Zeichnen/Logik

**Implementation notes:**
- Use @Environment for coordinator and playerStore
- Use GeometryReader for responsive positioning if needed
- Activity signs use WoodSign component with onTap for unlocked activities
- Locked activities show WoodSign in locked state (no onTap action)
  </action>
  <verify>HomeView renders with title, 4 activity signs (2 unlocked, 2 locked), treasure chest visible</verify>
  <done>HomeView shows all UI elements in correct positions with proper styling</done>
</task>

<task type="auto">
  <name>Task 2: Implement activity navigation</name>
  <files>BennieGame/Features/Home/HomeView.swift</files>
  <action>
Add navigation behavior for activity signs:

**Unlocked activities (RÃ¤tsel, Zahlen):**
- On tap: coordinator.transition(to: .activitySelection(activityType))
- Add subtle press animation via WoodSign

**Locked activities (Zeichnen, Logik):**
- On tap: Show brief message (could log for now, voice comes later)
- Visual indicator: chains/padlock overlay (WoodSign locked state)

**Treasure chest:**
- Check playerStore.activePlayer?.coins
- If coins >= 10: Navigate to .treasureScreen
- If coins < 10: Show encouraging message (placeholder for voice)
- Add visual feedback: chest glows if accessible

**Settings gear:**
- On tap: Navigate to .parentGate

**State management:**
- Access ActivityType.isLocked to determine sign state
- Use coordinator for all navigation
  </action>
  <verify>Tapping unlocked activities navigates; locked activities show locked state; treasure responds to coin count</verify>
  <done>Navigation works correctly for all interactive elements</done>
</task>

<task type="auto">
  <name>Task 3: Create placeholder activity selection screens</name>
  <files>BennieGame/Features/Activities/Raetsel/RaetselSelectionView.swift, BennieGame/Features/Activities/Zahlen/ZahlenSelectionView.swift</files>
  <action>
Create minimal placeholder screens for activity selection:

**RaetselSelectionView:**
```swift
struct RaetselSelectionView: View {
    @Environment(AppCoordinator.self) var coordinator

    var body: some View {
        VStack(spacing: 40) {
            WoodSign(text: "RÃ¤tsel", style: .title)

            Text("Puzzle Matching - Coming in Phase 3")
                .font(BennieFont.body)
            Text("Labyrinth - Coming in Phase 3")
                .font(BennieFont.body)

            WoodButton("ZurÃ¼ck") {
                coordinator.navigateHome()
            }
        }
        .frame(maxWidth: .infinity, maxHeight: .infinity)
        .background(BennieColors.cream)
    }
}
```

**ZahlenSelectionView:**
```swift
struct ZahlenSelectionView: View {
    @Environment(AppCoordinator.self) var coordinator

    var body: some View {
        VStack(spacing: 40) {
            WoodSign(text: "Zahlen 1,2,3", style: .title)

            Text("WÃ¼rfel - Coming in Phase 3")
                .font(BennieFont.body)
            Text("WÃ¤hle die Zahl - Coming in Phase 3")
                .font(BennieFont.body)

            WoodButton("ZurÃ¼ck") {
                coordinator.navigateHome()
            }
        }
        .frame(maxWidth: .infinity, maxHeight: .infinity)
        .background(BennieColors.cream)
    }
}
```

Update ContentView to handle .activitySelection state routing to these views.
  </action>
  <verify>Can navigate Home â†’ RÃ¤tsel Selection â†’ Back to Home; same for Zahlen</verify>
  <done>Activity selection placeholders work with back navigation</done>
</task>

<task type="auto">
  <name>Task 4: Create TreasureView placeholder and ParentGateView placeholder</name>
  <files>BennieGame/Features/Treasure/TreasureView.swift, BennieGame/Features/Parent/ParentGateView.swift</files>
  <action>
Create minimal placeholder screens:

**TreasureView:**
```swift
struct TreasureView: View {
    @Environment(AppCoordinator.self) var coordinator
    @Environment(PlayerStore.self) var playerStore

    var body: some View {
        VStack(spacing: 40) {
            WoodSign(text: "Schatztruhe", style: .title)

            if let player = playerStore.activePlayer {
                Text("ðŸª™ \(player.coins) MÃ¼nzen")
                    .font(BennieFont.screenHeader)
            }

            Text("YouTube-Belohnungen kommen in Phase 4")
                .font(BennieFont.body)
                .foregroundColor(BennieColors.textSecondary)

            WoodButton("ZurÃ¼ck") {
                coordinator.navigateHome()
            }
        }
        .frame(maxWidth: .infinity, maxHeight: .infinity)
        .background(BennieColors.cream)
    }
}
```

**ParentGateView:**
```swift
struct ParentGateView: View {
    @Environment(AppCoordinator.self) var coordinator

    var body: some View {
        VStack(spacing: 40) {
            Text("ðŸ”’ Elternbereich")
                .font(BennieFont.screenHeader)

            Text("Mathe-Frage kommt in Phase 6")
                .font(BennieFont.body)
                .foregroundColor(BennieColors.textSecondary)

            WoodButton("ZurÃ¼ck") {
                coordinator.navigateHome()
            }
        }
        .frame(maxWidth: .infinity, maxHeight: .infinity)
        .background(BennieColors.cream)
    }
}
```

Update ContentView to route .treasureScreen and .parentGate states.
  </action>
  <verify>Can navigate to Treasure from Home (if coins â‰¥ 10); can navigate to Parent Gate from settings</verify>
  <done>All placeholder screens accessible with proper back navigation</done>
</task>

<task type="auto">
  <name>Task 5: Update ContentView with complete routing</name>
  <files>BennieGame/App/ContentView.swift</files>
  <action>
Ensure ContentView handles all Phase 2 states:

```swift
struct ContentView: View {
    @Environment(AppCoordinator.self) var coordinator
    @Environment(PlayerStore.self) var playerStore

    var body: some View {
        Group {
            switch coordinator.currentState {
            case .loading:
                LoadingView()
            case .playerSelection:
                PlayerSelectionView()
            case .home:
                HomeView()
            case .activitySelection(let activityType):
                switch activityType {
                case .raetsel:
                    RaetselSelectionView()
                case .zahlen:
                    ZahlenSelectionView()
                default:
                    // Locked activities shouldn't reach here
                    HomeView()
                }
            case .treasureScreen:
                TreasureView()
            case .parentGate:
                ParentGateView()
            default:
                // Other states come in later phases
                VStack {
                    Text("State: \(String(describing: coordinator.currentState))")
                        .font(BennieFont.body)
                    WoodButton("ZurÃ¼ck zum Start") {
                        coordinator.navigateHome()
                    }
                }
                .frame(maxWidth: .infinity, maxHeight: .infinity)
                .background(BennieColors.cream)
            }
        }
        .animation(.easeInOut(duration: 0.3), value: coordinator.currentState)
    }
}
```

Verify AppCoordinator has navigateHome() and transition(to:) methods from 02-01.
  </action>
  <verify>All state transitions render correct views; animation smooth between screens</verify>
  <done>ContentView routes all Phase 2 states correctly</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] Project builds without errors
- [ ] HomeView shows title, 4 activity signs, treasure chest, settings
- [ ] RÃ¤tsel and Zahlen signs are tappable and navigate
- [ ] Zeichnen and Logik show locked state
- [ ] Treasure chest navigates when coins â‰¥ 10
- [ ] Settings gear navigates to parent gate placeholder
- [ ] All placeholder screens have working back buttons
- [ ] Touch targets â‰¥ 96pt on all interactive elements
- [ ] All text is German
- [ ] Colors match BennieColors palette
</verification>

<success_criteria>
- All tasks completed
- Complete navigation flow: Loading â†’ Player Selection â†’ Home â†’ Activities/Treasure/Settings
- All placeholder screens accessible
- Back navigation works everywhere
- Visual design matches playbook (within placeholder constraints)
- Touch targets enforced
- German text only
- Project compiles successfully
</success_criteria>

<output>
After completion, create `.planning/phases/02-core-screens/02-03-SUMMARY.md`

The summary should note: "Home screen and navigation complete, Phase 2 fully implemented"

Also update `.planning/ROADMAP.md` to mark Phase 2 plans as complete:
- [x] 02-01: State management
- [x] 02-02: Loading & player selection screens
- [x] 02-03: Home screen with activity signs and treasure chest
</output>
