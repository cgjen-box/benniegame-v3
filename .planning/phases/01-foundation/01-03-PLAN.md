---
phase: 01-foundation
plan: 03
type: execute
---

<objective>
Create core UI components: WoodButton, WoodSign, and ProgressBar with 96pt touch targets.

Purpose: Build reusable components that all screens will use, enforcing autism-friendly design.
Output: Three production-ready components matching reference images.
</objective>

<execution_context>
~/.claude/get-shit-done/workflows/execute-phase.md
~/.claude/get-shit-done/templates/summary.md
~/.claude/get-shit-done/references/checkpoints.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@SWIFTUI_CODING_GUIDELINES.md
@PLAYBOOK_CONDENSED.md

**Prior plans:**
- 01-01: Project structure created
- 01-02: BennieColors and BennieTypography available

**Reference images:**
- design/references/screens/Reference_Menu_Screen.png (WoodButton, WoodSign)
- design/references/screens/Reference_Treasure_Screen.png (ProgressBar)

**Critical constraints:**
- ALL touch targets MUST be ≥96pt × 96pt (NON-NEGOTIABLE)
- Use BennieColors ONLY (no hardcoded colors)
- Use BennieFont ONLY (no hardcoded fonts)
- Press animation: scale 0.95, duration 0.1s
- NO flashing, NO shaking animations
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create ChildFriendlyButton base component</name>
  <files>BennieGame/Design/Components/ChildFriendlyButton.swift</files>
  <action>
Create ChildFriendlyButton.swift - the base for all interactive elements:

```swift
import SwiftUI

struct ChildFriendlyButton<Label: View>: View {
    let action: () -> Void
    @ViewBuilder let label: () -> Label

    /// Minimum touch target for autism-friendly design
    static var minimumTouchTarget: CGFloat { 96 }

    var body: some View {
        Button(action: {
            let impact = UIImpactFeedbackGenerator(style: .light)
            impact.impactOccurred()
            action()
        }) {
            label()
                .frame(
                    minWidth: Self.minimumTouchTarget,
                    minHeight: Self.minimumTouchTarget
                )
                .contentShape(Rectangle())
        }
        .buttonStyle(ChildButtonStyle())
    }
}

struct ChildButtonStyle: ButtonStyle {
    func makeBody(configuration: Configuration) -> some View {
        configuration.label
            .scaleEffect(configuration.isPressed ? 0.95 : 1.0)
            .animation(.easeOut(duration: 0.1), value: configuration.isPressed)
    }
}
```

This enforces 96pt minimum on ALL buttons. Never bypass this.
  </action>
  <verify>Project builds; ChildFriendlyButton can wrap any content</verify>
  <done>Base button component enforces 96pt touch targets</done>
</task>

<task type="auto">
  <name>Task 2: Create WoodButton component</name>
  <files>BennieGame/Design/Components/WoodButton.swift</files>
  <action>
Create WoodButton.swift matching reference images:

Features:
- Uses ChildFriendlyButton as base (inherits 96pt enforcement)
- Wood gradient background (woodLight → woodMedium)
- Dark wood border (woodDark, 3pt)
- Rounded corners (12pt radius)
- Shadow effect
- Optional icon + title

```swift
import SwiftUI

struct WoodButton: View {
    let title: String
    var icon: String? = nil
    let action: () -> Void

    var body: some View {
        ChildFriendlyButton(action: action) {
            VStack(spacing: 8) {
                if let icon = icon {
                    Image(systemName: icon)
                        .font(.system(size: 32))
                }
                Text(title)
                    .font(BennieFont.button(24))
            }
            .foregroundColor(BennieColors.textOnWood)
            .frame(minWidth: 160, minHeight: 140)
            .padding(16)
            .background(
                RoundedRectangle(cornerRadius: 12)
                    .fill(
                        LinearGradient(
                            colors: [BennieColors.woodLight, BennieColors.woodMedium],
                            startPoint: .top,
                            endPoint: .bottom
                        )
                    )
            )
            .overlay(
                RoundedRectangle(cornerRadius: 12)
                    .stroke(BennieColors.woodDark, lineWidth: 3)
            )
            .shadow(color: .black.opacity(0.2), radius: 4, x: 0, y: 2)
        }
    }
}
```

Preview with title only and title+icon variants.
  </action>
  <verify>Project builds; WoodButton displays correctly in preview; touch area ≥96pt</verify>
  <done>WoodButton matches design with enforced touch targets</done>
</task>

<task type="auto">
  <name>Task 3: Create WoodSign and ProgressBar components</name>
  <files>BennieGame/Design/Components/WoodSign.swift, BennieGame/Design/Components/ProgressBar.swift</files>
  <action>
Create WoodSign.swift:
- Hanging rope decoration at top
- Wood plank background
- Can be tappable (uses ChildFriendlyButton) or display-only
- Locked state: chains + padlock overlay
- Unlocked state: subtle glow

```swift
import SwiftUI

struct WoodSign: View {
    let title: String
    var isLocked: Bool = false
    var action: (() -> Void)? = nil

    var body: some View {
        VStack(spacing: 0) {
            // Rope at top
            RopeDecoration()

            // Sign content
            signContent
        }
    }

    @ViewBuilder
    private var signContent: some View {
        if let action = action {
            ChildFriendlyButton(action: action) {
                signBody
            }
        } else {
            signBody
        }
    }

    private var signBody: some View {
        ZStack {
            // Wood background
            RoundedRectangle(cornerRadius: 8)
                .fill(BennieColors.woodMedium)
                .overlay(
                    RoundedRectangle(cornerRadius: 8)
                        .stroke(BennieColors.woodDark, lineWidth: 2)
                )

            Text(title)
                .font(BennieFont.button(20))
                .foregroundColor(BennieColors.textOnWood)

            // Locked overlay
            if isLocked {
                LockedOverlay()
            }
        }
        .frame(minWidth: 120, minHeight: 96)
    }
}

struct RopeDecoration: View {
    var body: some View {
        Rectangle()
            .fill(BennieColors.rope)
            .frame(width: 8, height: 20)
    }
}

struct LockedOverlay: View {
    var body: some View {
        ZStack {
            Color.black.opacity(0.3)
            Image(systemName: "lock.fill")
                .font(.system(size: 24))
                .foregroundColor(BennieColors.chain)
        }
        .clipShape(RoundedRectangle(cornerRadius: 8))
    }
}
```

Create ProgressBar.swift:
- Wood trough container
- Success green fill (#99BF8C)
- Shows current coins (0-20+)
- 10 coin slots
- Chest icon at milestones

```swift
import SwiftUI

struct ProgressBar: View {
    let currentCoins: Int
    let maxCoins: Int = 20

    private var fillPercentage: CGFloat {
        min(CGFloat(currentCoins) / CGFloat(maxCoins), 1.0)
    }

    var body: some View {
        HStack(spacing: 12) {
            // Berry decoration (left)
            BerryCluster()

            // Progress trough
            GeometryReader { geo in
                ZStack(alignment: .leading) {
                    // Wood trough background
                    RoundedRectangle(cornerRadius: 8)
                        .fill(BennieColors.woodDark)

                    // Success fill
                    RoundedRectangle(cornerRadius: 8)
                        .fill(BennieColors.success)
                        .frame(width: geo.size.width * fillPercentage)
                        .animation(.easeInOut(duration: 0.3), value: currentCoins)

                    // Coin slots overlay
                    CoinSlots(currentCoins: currentCoins)
                }
            }
            .frame(height: 40)

            // Berry decoration (right)
            BerryCluster()

            // Chest icon if earned
            if currentCoins >= 10 {
                Image(systemName: "shippingbox.fill")
                    .foregroundColor(BennieColors.coinGold)
                    .font(.system(size: 24))
            }
        }
        .padding(.horizontal, 16)
    }
}

struct BerryCluster: View {
    var body: some View {
        Circle()
            .fill(Color.red.opacity(0.7)) // Berry red (not pure red)
            .frame(width: 16, height: 16)
    }
}

struct CoinSlots: View {
    let currentCoins: Int

    var body: some View {
        HStack(spacing: 4) {
            ForEach(0..<10, id: \.self) { index in
                Circle()
                    .fill(index < currentCoins ? BennieColors.coinGold : Color.clear)
                    .stroke(BennieColors.woodLight.opacity(0.5), lineWidth: 1)
                    .frame(width: 12, height: 12)
            }
        }
        .padding(.horizontal, 8)
    }
}
```
  </action>
  <verify>Project builds; all components display in preview; touch targets verified</verify>
  <done>WoodSign (with locked/unlocked states) and ProgressBar complete</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] Project builds without errors
- [ ] All components use BennieColors (no hardcoded hex)
- [ ] All components use BennieFont (no hardcoded fonts)
- [ ] WoodButton touch target ≥96pt (use Accessibility Inspector)
- [ ] WoodSign touch target ≥96pt when tappable
- [ ] Press animation is subtle (0.95 scale, 0.1s)
- [ ] ProgressBar animates fill smoothly
</verification>

<success_criteria>
- All tasks completed
- Components match reference images
- Touch targets enforced at 96pt minimum
- No hardcoded colors or fonts
- Project builds successfully
- Phase 1 complete
</success_criteria>

<output>
After completion, create `.planning/phases/01-foundation/01-03-SUMMARY.md`

The summary should note: "Phase 1 complete, ready for Phase 2: Core Screens"
</output>
